# 实验室服务器使用与管理章程（草案）

> **[重要] 在使用本实验室计算资源前，请务必仔细阅读并遵守以下条款。你的登录行为即视为已同意本章程。**

## 一、 账号与安全规范

1. **实名制原则**：研究生拥有独立账号，**禁止私自将账号借予他人**。
2. **本科生准入**：本科生不分配独立账号，必须在带教研究生账号下进行操作，由带教研究生承担监管责任。
3. **登录方式**：服务器强制使用 **SSH 公钥登录**。禁止使用弱口令密码，建议定期更换本地密钥对。
4. **权限红线**：原则上**不开放 sudo 权限**。任何涉及系统级软件、驱动、内核协议栈的修改，必须报备管理员评估。严禁私自尝试越权操作。

## 二、 环境管理规范

1. **环境隔离**：严禁直接在 base 环境或系统全局环境下 `pip install`。必须使用 `conda` 或 `virtualenv` 创建个人虚拟环境。
2. **版本冲突**：如遇论文源码需覆盖系统库版本，请务必在虚拟环境中安装。若虚拟环境无法解决（如需特定版本的 CUDA Toolkit），请联系管理员通过软链接或环境变量动态加载。

## 三、 存储与数据管理

1. **路径分配**：
* **Home目录**：仅存放配置文件和轻量代码，容量有限，严禁存放模型和数据集。
* **Data目录**：`/mnt/hdd<x>/[用户名]` 为主存储区。请通过软链接将 `~/data` 指向该目录。
* **个人大容量存储目录**：放在 `/mnt` 下的 `hdd<x>` 文件夹下，`<x>` 表示不同的机械硬盘，可以使用 `df -h` 查看 `hdd<x>` 分别对应哪些机械硬盘，以及查看总容量和已使用容量。找到对应文件夹下面自己名字的文件夹，可以存放自己的数据，如 `/mnt/hdd1/zhangsan`。表示张三放在 `hdd1` 下的数据。
* **存储服务器目录**：本组已配备 197TB 的存储服务器，如有需要，可将数据放置于存储服务器，存储服务器路径为 `/mnt/nfs/<Group_Name>`，`<Group_Name>` 表示自己所属组使用的文件夹，在文件夹下找到自己名字的文件夹进行存储，若无自己名字文件夹则自行创建。如，`/mnt/nfs/CMG/zhangsan`，表示张三所使用的 nfs 存储数据文件夹。

2. **SSD vs HDD 使用建议**：
* **SSD（高速固态）**：仅用于存放**当前正在训练**的热数据、索引文件。训练结束请及时迁移至 HDD。
* **HDD（机械硬盘）**：用于存放原始数据集、模型备份、长期实验日志。
* **禁忌**：严禁将 SSD 撑爆（剩余空间必须保持 10% 以上），否则会导致系统交换区卡死，甚至无法开机。

3. **毕业清理**：研三学生需在答辩后 1 个月内完成数据迁移。管理员将在毕业 2 个月后进行全盘物理清理，**数据无价，概不负责**。

## 四、 资源调度与礼仪

1. **显存抢占**：启动训练前，必须使用 `nvidia-smi` 查看显存占用。禁止在显存不足时强行挂载新进程，严禁使用脚本恶意抢占显存。
2. **计算礼仪**：长期（>24h）占用大量算力资源，建议在群内公示，避免他人因资源被挤占导致训练中断。
3. **异常处理**：若无法连接 SSH，请先确认校园网状态，5 分钟后仍不通请联系管理员。严禁私自硬重启服务器。

## 五、其他问题

1. 无法使用 ssh 连接到服务器请先稍等几分钟，大概率是学校校园网络波动或者机器因故需要关机，仍未解决则联系服务器管理员处理。
